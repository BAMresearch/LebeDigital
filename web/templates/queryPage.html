{% extends 'base.html' %}

{% block title %}SPARQL Query{% endblock %}

{% block content %}
<!-- Page-specific content goes here -->
<div class="content col-12 p-2">
    <div class="row">
        <div class="col-6">
            <h5 class="">SPARQL Query</h5>
            <form id="sparqlForm" class="pt-2 pb-4">
                <textarea id="sparqlQuery" name="q" rows="10" cols="76" placeholder="Enter your SPARQL query here" required></textarea>
                <br>
                <div class="d-flex pt-3" style="gap: 10px;">
                    <button type="submit" class="btn btn-theme">Run Query</button>
                    <!-- Button, um vorgefertigten Text einzufÃ¼gen -->
                    <button type="button" class="btn btn-outline-theme" id="insertTextBtn">Insert Predefined Text</button>
                </div>
            </form>
        </div>
        <div class="col-6">
            <h5 class="px-2">Example Queries</h5>
            <ol class="list-group list-group-flush">
                <a href="#" class="list-group-item list-group-item-action query-item" data-query="query1">
                    Get the <strong>water-cement ratio</strong> for all mixtures
                </a>
                <a href="#" class="list-group-item list-group-item-action query-item" data-query="query2">
                    Get the <strong>cement</strong> content and type for each mixture
                </a>
                <a href="#" class="list-group-item list-group-item-action query-item" data-query="query3">
                    Get all <strong>admixtures</strong> used in each mixture
                </a>
                <a href="#" class="list-group-item list-group-item-action query-item" data-query="query4">
                    Compare <strong>water-cement ratio</strong>  with <strong>compressive strength</strong>
                </a>
                <a href="#" class="list-group-item list-group-item-action query-item" data-query="query5">
                    Get the <strong>input compressive strength</strong> and <strong>elastic modulus</strong> for each specimen
                </a>
                <a href="#" class="list-group-item list-group-item-action query-item" data-query="query6">
                    Compare <strong>water-cement ratio</strong> with <strong>elastic modulus</strong>
                </a>
            </ol>
        </div>
    </div>
    
    <div id="queryResults" class="text-danger small">
        <!-- Query results will be displayed here -->
    </div>
    <div class="d-none justify-content-between" id="downloadBtn">
        <h5 class="mb-0 pt-2">Results</h5>
        <button class="btn btn-sm btn-theme" onclick="downloadTable()"><i class="fas fa-file-download"></i>&nbsp;Download as CSV</button>
    </div>
    <br>

    <div id="resultsTable" class="mt-0 text-small"></div>
    
    <canvas id="myChart" width="400" height="200"></canvas>




</div>
<script>
    window.appConfig = {
      urls: {
        getIndividualData: "{{ url_for('get_individual_data') }}",
        database: "{{ url_for('database') }}",
        queryExecute: "{{ url_for('execute_sparql_query') }}",
      }
    };
</script>
<script src="static/js/querypage.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

{% endblock %}
